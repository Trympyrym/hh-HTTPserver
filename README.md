# hh-HTTPserver
использование: java -jar <файл jar> <файл-конфиг>

в конфиге можно задать следующие параметры:
directory - оттуда сервер берет файлы. путь относительный. задавать обязательно
port - запросы только на этом порту будут слушаться. Задавать также обязательно
nThreads - максимальное количество тредов которые можно использовать. Минимум - 3 (один слушает порт, другой отслеживает создание/изменение/удаление файлов, и минимум один для трансфера файлов). По умолчанию 4.
minCacheSize - файлы могут разбиваться на несколько частей при кэшировании. При этом, во-первых, можно кэшировать файлы размером более MAXINT байт, а во-вторых, можно читать файлы несколькими тредами (тред блокирует только тот кусок, который сейчас читает). Это определяется размером файла (если размер файла не влезает в MAXINT, то он разобьется на несколько), количеством тредов трансфера файлов и данным параметром (minCacheSize)
Строки под NO_CACHE - файлы (пути к ним относительно directory), который не будут кэшированы. При этом их трансфер будет идти напрямую (с диска в сокет), что быстрее, чем через буфер, но файл при этом блокируется.
Строки под IGNORE - файлы (пути к ним относительно directory), которые сервер будет игнорировать.

Всякие мелочи, которые были замечены в последний момент:
1) Относительные пути в конфиг-файле. Было бы неплохо сделать возможность указывать абсолютные
2) В данный момент сервер не умеет выключаться. Для его корректного выключения нужно выйти из цикла в mainloop() HTTP-сервера и выйти из цикла в WatcherTask. После этого в мэйне подождать, пока все завершится
3) nThreads. В конфиге чуть более логично задавать не ограничение на ВСЕ треды, а ограничение на треды трансфера файлов. Также значения этого параметра не проверяются.
4) Обход директории (в процедуре кэширования всего подряд при старте файл-сервера) - у меня на линухе работает только с абсолютными путями. На винде работает в обоих случаях. По идее, надо бы все привести к абсолютным
5) FileLock lock() - завершает тред и ничего не пишет. При этом хотелось бы в явном виде задать блокировку читаемых файлов.
6) Для более легкого тестирования в доступные расширения файлов добавлен ".txt" (и, соответственно, mime-тип "text/plain")
7) параметр minCacheSize - работает не совсем корректно, может дать блоки меньшего размера.
